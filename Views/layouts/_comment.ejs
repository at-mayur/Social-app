

<h3 class="head">
    Comments
</h3>

<!-- Comments list -->
<ul id="<%= post.id %>" class="comment-list">
    <% for(let comment of post.comments){ %>
    <li id="<%= comment.id %>">
        <div class="comment">
            <h5><%= comment.user.username %></h5>
            <p><%= comment.commentContent %></p>

            <!-- Showing like for comment from current user -->
            <div class="like-div">
                <% if(comment.like){ %>
                    <span class="like-span"><a id="comment-like-<%= comment.id %>" class="blue" href="/post/comment-like/<%= comment.id %>">Like</a></span>
                <% }else{ %>
                    <span class="like-span"><a id="comment-like-<%= comment.id %>" class="grey" href="/post/comment-like/<%= comment.id %>">Like</a></span>
                <% } %>
                
                <!-- Likes count -->
                <span id="comment-like-count-<%= comment.id %>"><%= comment.likes.length %></span>
            </div>
        </div>

        <!-- if current logged user and comment creator are same then display delete button -->
        <% if(locals.user && (locals.user.id==post.user.id || locals.user.id==comment.user.id)){ %>
            <div class="comment-delete">
                <a id="comment-delete-<%= comment.id %>" href="/post/delete-comment/<%= comment.id %>"><i class="fa-solid fa-trash-can"></i></a>
            </div>
        <% } %>
        
    </li>
    <% } %>
</ul>